void callJavaCameraMethod(char* directory, char* filename, int tsize){
  JNIEnv *env = GetJNIEnv();
  jstring jdir = (*env)->NewStringUTF(env,directory);
  jstring jfile = (*env)->NewStringUTF(env,filename);
  jclass main_class = (*env)->FindClass(env, "@SYS_ORGTLD@/@SYS_ORGSLD@/@SYS_LOCASEAPPNAME@/@SYS_APPNAME@");
  if (env&&globalObj){
    jmethodID method = (*env)->GetMethodID(env, main_class, "startCamera", "(Ljava/lang/String;Ljava/lang/String;I)V");
    (*env)->CallVoidMethod(env, globalObj, method, jdir, jfile, tsize);
  }
}

jint *pixels;
int* image(){   
  return pixels;
}

static jobject jobj_ref;
JNIEXPORT void JNICALL Java_@SYS_ORGTLD@_@SYS_ORGSLD@_@SYS_LOCASEAPPNAME@_passData(JNIEnv* env, jobject obj, jintArray img) { 
  pixels = (*env)->GetIntArrayElements(env, img, 0);
  if(pixels[0] == -1){
    jobj_ref = (*env)->NewGlobalRef(env, obj);
  }else{
    (*env)->ReleaseIntArrayElements(env, img, pixels, 0);
  }
}
